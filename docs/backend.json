{
  "entities": {
    "Customer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Customer",
      "type": "object",
      "description": "Represents a customer with outstanding invoices.",
      "properties": {
        "customerCode": {
          "type": "string",
          "description": "The unique code assigned to the customer."
        },
        "customerName": {
          "type": "string",
          "description": "The name of the customer."
        },
        "region": {
          "type": "string",
          "description": "The geographical region of the customer."
        },
        "department": {
            "type": "string",
            "enum": ["Batching Plant", "Pump"]
        },
        "outstandingAmount": {
            "type": "number"
        },
        "remarks": {
            "type": "string",
            "enum": ["payment received", "partial payment", "under follow-up", "dispute", "write-off", "none"]
        },
        "notes": {
            "type": "string"
        },
        "assignedEngineer": {
            "type": "string"
        }
      },
      "required": [
        "customerCode",
        "customerName",
        "region",
        "department"
      ]
    },
    "Invoice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Invoice",
      "type": "object",
      "description": "Represents an invoice for a customer.",
      "properties": {
        "invoiceNumber": {
          "type": "string",
          "description": "The unique number of the invoice."
        },
        "invoiceAmount": {
          "type": "number",
          "description": "The total amount of the invoice."
        },
        "invoiceDate": {
          "type": "string",
          "description": "The date the invoice was issued.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The current status of the invoice (e.g., paid, unpaid, dispute)."
        }
      },
      "required": [
        "invoiceNumber",
        "invoiceAmount",
        "invoiceDate",
        "status"
      ]
    },
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents an application user.",
      "properties": {
          "name": {"type": "string"},
          "email": {"type": "string", "format": "email"},
          "role": {"type": "string", "enum": ["Manager", "Engineer", "Country Manager", "Admin"]},
          "region": {"type": "string", "enum": ["North", "South", "East", "West"]},
          "department": {"type": "string", "enum": ["Batching Plant", "Pump"]},
          "contact": {"type": "string"}
      },
      "required": ["name", "email", "role", "region", "department"]
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/customers/{customerId}": {
      "schema": { "$ref": "#/entities/Customer" },
      "description": "Stores customer data."
    },
    "/customers/{customerId}/invoices/{invoiceId}": {
      "schema": { "$ref": "#/entities/Invoice" },
      "description": "Stores invoice data for a specific customer."
    },
    "/users/{userId}": {
        "schema": {"$ref": "#/entities/User"},
        "description": "Stores user profile information."
    }
  }
}
